{"name":"-JavaScript","slug":"JavaScript","count":2,"postlist":[{"title":"js的变量提升","slug":"js的变量提升","date":"2019-07-15T15:31:28.000Z","updated":"2019-07-15T17:36:39.567Z","comments":true,"path":"api/articles/js的变量提升.json","excerpt":"","keywords":null,"cover":"/2019/07/15/js的变量提升/window.PNG","content":"<p><strong>这一篇是关于JavaScript的变量提升</strong></p>\n<p>首先，Js中有一个全局对象Window,所有的表达式都在当前的环境中计算，所以全局对象的属性可以当做全局变量来用，比如</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">\t&lt;head&gt;</span><br><span class=\"line\">\t\t&lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class=\"line\">\t\t&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class=\"line\">\t\t&lt;title&gt;&lt;/title&gt;</span><br><span class=\"line\">\t&lt;/head&gt;</span><br><span class=\"line\">\t&lt;body&gt;</span><br><span class=\"line\">\t\t&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class=\"line\">\t\t\twindow.console.log(&quot;helloworld&quot;);</span><br><span class=\"line\">\t\t\twindow.document.write(&quot;我是文本&quot;)</span><br><span class=\"line\">\t\t&lt;/script&gt;</span><br><span class=\"line\">\t&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/2019/07/15/js的变量提升/window.PNG\" alt><br>所以我们也可以写成</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class=\"line\">\t\t\tconsole.log(&quot;helloworld&quot;);</span><br><span class=\"line\">\t\t\tdocument.write(&quot;我是文本&quot;)</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>效果是一样的，但是有一点你要注意，这一切都是在浏览器的环境下运行的，如果你去尝试在Node的环境下去编译window.console.log(“11”),他会报错的，因为在Node中，全局对象并不是Window了，而是global，除了他本身，所有的全局变量都是他的属性。<br>所以看下这个基本的题，</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var a = 1 ;//这个时候，你定义了一个全局的变量，可以直接通过window.a来调用</span><br><span class=\"line\">console.log(a);// 1</span><br><span class=\"line\">console.log(window.a)// 1</span><br><span class=\"line\">console.log(typeof window.a);// number</span><br><span class=\"line\">console.log(typeof a);// number</span><br></pre></td></tr></table></figure>\n\n<p>了解了相关的知识后，咱们通过一个列子进入正题</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var a = 3 ;</span><br><span class=\"line\"></span><br><span class=\"line\">function getA()&#123;</span><br><span class=\"line\">    console.log(a);</span><br><span class=\"line\">    var a  = 1 ;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">getA();</span><br></pre></td></tr></table></figure>\n\n<p>聪明的你，猜一猜控制台打印的结果是什么？<br>打印3 是错误的，打印1 也是错误的，来分析一下这个，<br>首先我们定义了一个全局变量 a 初始化值为 a = 3 ; 然后程序继续执行，在进入到函数内部中，就形成了块级作用域，<br>即要求先打印a的值 ，于是他会优先在函数内部去寻找变量a ，如果找到 就打印 ，找不到就会去全局变量中找，如果再找不到，这个变量就是未定义的<code>undefined</code>，这个时候我们可以看到<br>局部变量中是有a的，所以你高高兴兴的认为 控制台会打印 1，实际上这是错误的，找到a是不假，但是由于函数的变量提升，上述代码可以写成这样</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var a = 3 ;</span><br><span class=\"line\"></span><br><span class=\"line\">function getA()&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    var a ;</span><br><span class=\"line\">    console.log(a);</span><br><span class=\"line\">    a  = 1 ;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">getA();</span><br></pre></td></tr></table></figure>\n\n<p>这时候的打印结果就是 <code>undefined</code>，在js中不管是在函数内部或者全局作用域的哪个位置，当你用var 声明了一个变量，js将会优先去解析他，不管这个变量有没有初始化，</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">console.log(a)//undefined</span><br><span class=\"line\"></span><br><span class=\"line\">var a = 4 ;</span><br><span class=\"line\">//实际上,js将这段代码解析为:</span><br><span class=\"line\">var a ;</span><br><span class=\"line\">console.log(a);</span><br><span class=\"line\">a = 4;</span><br><span class=\"line\">//这就是所谓的变量提升</span><br></pre></td></tr></table></figure>\n\n<p>再来看 ：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var b = 4;</span><br><span class=\"line\"></span><br><span class=\"line\">function getB()&#123;</span><br><span class=\"line\">    window.b =3 ;</span><br><span class=\"line\">    console.log(b)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">getB();</span><br></pre></td></tr></table></figure>\n\n<p>这个结果你应该猜到了，没错，是3 ，首先定义了全局变量b ， 然后我们在函数内部中修改了全局变量b，打印的时候优先去函数内部寻找变量b，<br>window.b 在这个时候相当于重新给全局变量b赋了一个值，所以会打印出3</p>\n<p>最后一题：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var c = 1 ;</span><br><span class=\"line\">function getC()&#123;</span><br><span class=\"line\">    window.c = 2 ;</span><br><span class=\"line\">    console.log(c);</span><br><span class=\"line\">    var c ;</span><br><span class=\"line\">    console.log(window.c)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">getC();</span><br></pre></td></tr></table></figure>\n\n<p>分析一下：在函数内部中，函数变量提升，我们可以写成这样:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">    var c ;</span><br><span class=\"line\">    window.c = 2;</span><br><span class=\"line\">    console.log(c);</span><br><span class=\"line\">    console.log(window.c);</span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p>这样一分析，是不是就 拨开云雾见光明了 。。。 第一个优先去函数内部中找c，发现c没有定义 ，所以第一个打印<code>undefined</code>,第二个指明了去找window.c，于是第二个应该打印为 2 。</p>\n","text":"这一篇是关于JavaScript的变量提升首先，Js中有一个全局对象Window,所有的表达式都在当前的环境中计算，所以全局对象的属性可以当做全局变量来用，比如1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<","link":"","raw":null,"photos":[],"categories":[],"tags":[{"name":"-JavaScript","slug":"JavaScript","count":2,"path":"api/tags/JavaScript.json"}]},{"title":"原生js实现轮播图(一)-js定时器实现动画效果","slug":"原生js实现轮播图-一-js定时器实现动画效果","date":"2019-07-19T16:12:28.000Z","updated":"2019-07-19T16:47:37.697Z","comments":true,"path":"api/articles/原生js实现轮播图-一-js定时器实现动画效果.json","excerpt":"","keywords":null,"cover":"/2019/07/20/原生js实现轮播图-一-js定时器实现动画效果/jsAninmation_demo.gif","content":"<p>想尝试用原生js做一下轮播图的效果 ，在此之前，要先去实现一个轮播图中动画的过渡效果，实际上我们很容易的通过vue，或者jq实现一个轮播图，甚至css3也可以做到，但是本着原生大法好的原则，还是要去通过尝试去加深对基础js的理解及运用，话不多说 ，先看一下这个动画的Demo吧！</p>\n<p><img src=\"/2019/07/20/原生js实现轮播图-一-js定时器实现动画效果/jsAninmation_demo.gif\" alt></p>\n<p>可能是由于录制的原因，看上去过渡效果不是太流畅，实际上是没有这些问题的。贴一下代码，顺便记录一下思路</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">\t&lt;head&gt;</span><br><span class=\"line\">\t\t&lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class=\"line\">\t\t&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class=\"line\">\t\t&lt;title&gt;定时器运动&lt;/title&gt;</span><br><span class=\"line\">\t\t&lt;style type=&quot;text/css&quot;&gt;</span><br><span class=\"line\">\t\t\t*&#123;</span><br><span class=\"line\">\t\t\t\tmargin: 0;</span><br><span class=\"line\">\t\t\t\tpadding: 0;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t.box1&#123;</span><br><span class=\"line\">\t\t\t\twidth: 200px;</span><br><span class=\"line\">\t\t\t\theight: 200px;</span><br><span class=\"line\">\t\t\t\tbackground-color: yellow;</span><br><span class=\"line\">\t\t\t\tposition: relative;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t.line&#123;</span><br><span class=\"line\">\t\t\t\theight: 800px;</span><br><span class=\"line\">\t\t\t\tborder-right: black 1px solid ;</span><br><span class=\"line\">\t\t\t\tposition: absolute;</span><br><span class=\"line\">\t\t\t\tleft: 800px;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&lt;/style&gt;</span><br><span class=\"line\">\t&lt;/head&gt;</span><br><span class=\"line\">\t&lt;body&gt;</span><br><span class=\"line\">\t\t&lt;div class=&quot;box1&quot;&gt;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">\t\t&lt;div class=&quot;line&quot;&gt;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t&lt;button type=&quot;button&quot; class=&quot;btn&quot;&gt;向右运动&lt;/button&gt;</span><br><span class=\"line\">\t\t&lt;button type=&quot;button&quot; class=&quot;btn5&quot;&gt;向左运动&lt;/button&gt;</span><br><span class=\"line\">\t\t&lt;button type=&quot;button&quot; class=&quot;btn2&quot;&gt;点击停止运动&lt;/button&gt;</span><br><span class=\"line\">\t\t&lt;button type=&quot;button&quot; class=&quot;btn3&quot;&gt;点我到800px处自动停下&lt;/button&gt;</span><br><span class=\"line\">\t\t&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class=\"line\">\t\t\tvar box = document.querySelector(&quot;.box1&quot;);</span><br><span class=\"line\">\t\t\tvar box2 = document.querySelector(&quot;.box2&quot;);</span><br><span class=\"line\">\t\t\tvar btn = document.querySelector(&quot;.btn&quot;);</span><br><span class=\"line\">\t\t\tvar btn2 = document.querySelector(&quot;.btn2&quot;);</span><br><span class=\"line\">\t\t\tvar btn3 = document.querySelector(&quot;.btn3&quot;);</span><br><span class=\"line\">\t\t\tvar btn5 = document.querySelector(&quot;.btn5&quot;);</span><br><span class=\"line\">\t\t\tvar timer ;</span><br><span class=\"line\">\t\t\tvar timer2 ;</span><br><span class=\"line\">\t\t\tbtn.onclick = function()&#123;</span><br><span class=\"line\">\t\t\t\tclearInterval(timer);</span><br><span class=\"line\">\t\t\t\ttimer = setInterval(function()&#123;</span><br><span class=\"line\">\t\t\t\t\tvar currentVal = getComputedStyle(box,null).left;</span><br><span class=\"line\">\t\t\t\t\tbox.style.left = parseInt(currentVal)+1+&quot;px&quot;;</span><br><span class=\"line\">\t\t\t\t&#125;,5)\t</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tbtn2.onclick = function()&#123;</span><br><span class=\"line\">\t\t\t\tclearInterval(timer)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tbtn5.onclick = function()&#123;</span><br><span class=\"line\">\t\t\t\tclearInterval(timer);</span><br><span class=\"line\">\t\t\t\ttimer = setInterval(function()&#123;</span><br><span class=\"line\">\t\t\t\t\tvar currentVal = getComputedStyle(box,null).left;</span><br><span class=\"line\">\t\t\t\t\tbox.style.left = parseInt(currentVal)-1+&quot;px&quot;;</span><br><span class=\"line\">\t\t\t\t&#125;,5)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tbtn3.onclick = function()&#123;</span><br><span class=\"line\">\t\t\t\tclearInterval(timer);</span><br><span class=\"line\">\t\t\t\t timer = setInterval(function()&#123;</span><br><span class=\"line\">\t\t\t\t\tvar currentVal = getComputedStyle(box,null).left;</span><br><span class=\"line\">\t\t\t\t\tif(parseInt(currentVal) &lt; 800)&#123;</span><br><span class=\"line\">\t\t\t\t\t\tbox.style.left = parseInt(currentVal)+1+&quot;px&quot;;</span><br><span class=\"line\">\t\t\t\t\t&#125;else if(parseInt(currentVal) &gt; 800)&#123;</span><br><span class=\"line\">\t\t\t\t\t\tbox.style.left = parseInt(currentVal)-1+&quot;px&quot;;</span><br><span class=\"line\">\t\t\t\t\t&#125;else if( parseInt(currentVal) == 800)&#123;</span><br><span class=\"line\">\t\t\t\t\t\tclearInterval(timer)</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t&#125;,5)\t</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t&lt;/script&gt;</span><br><span class=\"line\">\t&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>代码中没有什么特别需要注意的地方，基本上的逻辑就是 在运动前开启定时器，并通过<code>getComputedStyle()</code>属性去获取当前盒子移动的距离，left,这个属性获取到的是一个带px的字符串，所以咱们通过parseInt去转换为数字，通过该数字加或者减去每毫秒运动的直线距离，绑定按钮点击事件，从而达到使得盒子运动的过渡动画效果<br>Tip:在点击按钮事件是，我们第一件事是要去关闭上一次的定时器，如果不关闭，会出现 ：一直点击向左的按钮，那么这个盒子运动的速度会越来越快，关闭之后，再怎么点击，都不会出现盒子加速的后果。</p>\n","text":"想尝试用原生js做一下轮播图的效果 ，在此之前，要先去实现一个轮播图中动画的过渡效果，实际上我们很容易的通过vue，或者jq实现一个轮播图，甚至css3也可以做到，但是本着原生大法好的原则，还是要去通过尝试去加深对基础js的理解及运用，话不多说 ，先看一下这个动画的Demo吧！ ","link":"","raw":null,"photos":[],"categories":[],"tags":[{"name":"-JavaScript","slug":"JavaScript","count":2,"path":"api/tags/JavaScript.json"}]}]}