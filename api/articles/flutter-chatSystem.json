{"title":"flutter_chatSystem","slug":"flutter-chatSystem","date":"2019-07-07T14:20:21.000Z","updated":"2019-08-06T14:01:11.814Z","comments":true,"path":"api/articles/flutter-chatSystem.json","photos":[],"link":"","excerpt":"今天复习了一下Flutter的布局，写了一个聊天的小demo。关于布局这一方面，没有什么可以记录的坑，所以直接贴代码看效果图吧 [Figure] ","covers":["/2019/07/07/flutter-chatSystem/chatListPage.gif"],"content":"<p>今天复习了一下Flutter的布局，写了一个聊天的小demo。关于布局这一方面，没有什么可以记录的坑，所以直接贴代码看效果图吧</p>\n<p><img src=\"/2019/07/07/flutter-chatSystem/chatListPage.gif\" alt></p>\n<p>main.dart:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &apos;package:flutter/material.dart&apos;;</span><br><span class=\"line\">import &apos;chatPage.dart&apos;;</span><br><span class=\"line\"></span><br><span class=\"line\">void main()=&gt; runApp(MyApp());</span><br><span class=\"line\"></span><br><span class=\"line\">class MyApp extends StatelessWidget &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  @override</span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    return MaterialApp(</span><br><span class=\"line\">      home: Scaffold(</span><br><span class=\"line\">        appBar: AppBar(</span><br><span class=\"line\">          title: Text(&quot;聊天室&quot;),</span><br><span class=\"line\">          centerTitle: true,</span><br><span class=\"line\"></span><br><span class=\"line\">        ),</span><br><span class=\"line\">        body: ChatList()</span><br><span class=\"line\">      ),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class ChatList extends StatefulWidget &#123;</span><br><span class=\"line\">  @override</span><br><span class=\"line\">  _ChatListState createState() =&gt; _ChatListState();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class _ChatListState extends State&lt;ChatList&gt; &#123;</span><br><span class=\"line\">  final title = &quot;花开不败&quot;;</span><br><span class=\"line\">  final titleStyle = TextStyle(color: Colors.black,fontWeight: FontWeight.bold,fontSize: 18.0);</span><br><span class=\"line\">  @override</span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    return ListView(</span><br><span class=\"line\">          children: &lt;Widget&gt;[</span><br><span class=\"line\">            chatItem(&quot;image/avatar.ico&quot;, title, &quot;你在哪呢，你妈喊你回家吃饭了&quot;, &quot;十分钟前&quot;)</span><br><span class=\"line\">          ],</span><br><span class=\"line\">        );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  Widget chatItem(String avatar , String title,String content,String time)&#123;</span><br><span class=\"line\">    return GestureDetector(</span><br><span class=\"line\">              child: Container(</span><br><span class=\"line\">                margin: const EdgeInsets.all(5),</span><br><span class=\"line\">                decoration: BoxDecoration(</span><br><span class=\"line\">                  // border: Border.all(color: Colors.black,width: 2)</span><br><span class=\"line\">                ),</span><br><span class=\"line\">                child: Row(</span><br><span class=\"line\">                children: &lt;Widget&gt;[</span><br><span class=\"line\">                  Image.asset(avatar,width: 50,height: 50,),</span><br><span class=\"line\">                  Container(</span><br><span class=\"line\">                      margin: const EdgeInsets.fromLTRB(15, 5, 5, 5),</span><br><span class=\"line\">                      child: Column(</span><br><span class=\"line\">                        crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class=\"line\">                        children: &lt;Widget&gt;[</span><br><span class=\"line\">                          Text(title,style: titleStyle,),</span><br><span class=\"line\">                          Text(content),</span><br><span class=\"line\">                        ],</span><br><span class=\"line\">                      ),</span><br><span class=\"line\">                    ),                </span><br><span class=\"line\">                    Expanded(</span><br><span class=\"line\">                      child: Container(</span><br><span class=\"line\">                        margin: const EdgeInsets.fromLTRB(0, 0, 0, 20),</span><br><span class=\"line\">                        decoration: BoxDecoration(</span><br><span class=\"line\">                          // border: Border.all(color: Colors.red,width: 2.0)</span><br><span class=\"line\">                        ),</span><br><span class=\"line\">                        alignment: Alignment.topRight,</span><br><span class=\"line\">                        child: Text(time),</span><br><span class=\"line\">                      ),</span><br><span class=\"line\">                    )</span><br><span class=\"line\">                  ],</span><br><span class=\"line\">                ),</span><br><span class=\"line\">              ),</span><br><span class=\"line\">              onTap: ()&#123;</span><br><span class=\"line\">                Navigator.push(</span><br><span class=\"line\">                  context, MaterialPageRoute(</span><br><span class=\"line\">                    builder: (BuildContext context)&#123;</span><br><span class=\"line\">                      return ChatPage(title);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                  )</span><br><span class=\"line\">                );</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">            );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// class MessageData&#123;</span><br><span class=\"line\">//   String avatar;</span><br><span class=\"line\">//   String title;</span><br><span class=\"line\">//   String chatContent;</span><br><span class=\"line\">//   String time;</span><br><span class=\"line\">//   MessageData(this.avatar,this.title,this.chatContent,this.time);</span><br><span class=\"line\">// &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// class Message extends StatefulWidget &#123;</span><br><span class=\"line\">//   @override</span><br><span class=\"line\">//   _MessageState createState() =&gt; _MessageState();</span><br><span class=\"line\">// &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// class _MessageState extends State&lt;Message&gt; &#123;</span><br><span class=\"line\">//   @override</span><br><span class=\"line\">//   Widget build(BuildContext context) &#123;</span><br><span class=\"line\">//     return Container(</span><br><span class=\"line\">      </span><br><span class=\"line\">//     );</span><br><span class=\"line\">//   &#125;</span><br><span class=\"line\">// &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">// List MessageItem = [</span><br><span class=\"line\">//   MessageData(&quot;dsad&quot;,&quot;dsad&quot;,&quot;dsadas&quot;,&quot;dsad&quot;)</span><br><span class=\"line\">// ];</span><br></pre></td></tr></table></figure>\n\n<a id=\"more\"></a>\n<p>chatPage.dart:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &apos;package:flutter/material.dart&apos;;</span><br><span class=\"line\"></span><br><span class=\"line\">class ChatPage extends StatefulWidget &#123;</span><br><span class=\"line\">  final String title;</span><br><span class=\"line\">  ChatPage(this.title);</span><br><span class=\"line\">  @override</span><br><span class=\"line\">  _ChatPageState createState() =&gt; _ChatPageState();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">class _ChatPageState extends State&lt;ChatPage&gt; &#123;</span><br><span class=\"line\">  @override</span><br><span class=\"line\">  Widget build(BuildContext context) &#123;</span><br><span class=\"line\">    return Scaffold(</span><br><span class=\"line\">      appBar: AppBar(</span><br><span class=\"line\">        title: Text(&quot;花开不败&quot;),</span><br><span class=\"line\">        centerTitle: true,</span><br><span class=\"line\">        leading: IconButton(</span><br><span class=\"line\">          icon: Icon(Icons.arrow_left),</span><br><span class=\"line\">          onPressed: ()&#123;</span><br><span class=\"line\">            Navigator.pop(context);</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ),</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      body: ListView(</span><br><span class=\"line\">        children: &lt;Widget&gt;[</span><br><span class=\"line\">          Text(&quot;大家好&quot;)</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      ),</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>未完待续。。。。</p>\n","categories":[],"tags":[{"name":"-Flutter","slug":"Flutter","count":4,"path":"api/tags/Flutter.json"}]}