{"title":"原生js实现轮播图(一)-js定时器实现动画效果","slug":"原生js实现轮播图-一-js定时器实现动画效果","date":"2019-07-19T16:12:28.000Z","updated":"2019-07-19T16:47:37.697Z","comments":true,"path":"api/articles/原生js实现轮播图-一-js定时器实现动画效果.json","photos":[],"link":"","excerpt":null,"covers":["/2019/07/20/原生js实现轮播图-一-js定时器实现动画效果/jsAninmation_demo.gif"],"content":"<p>想尝试用原生js做一下轮播图的效果 ，在此之前，要先去实现一个轮播图中动画的过渡效果，实际上我们很容易的通过vue，或者jq实现一个轮播图，甚至css3也可以做到，但是本着原生大法好的原则，还是要去通过尝试去加深对基础js的理解及运用，话不多说 ，先看一下这个动画的Demo吧！</p>\n<p><img src=\"/2019/07/20/原生js实现轮播图-一-js定时器实现动画效果/jsAninmation_demo.gif\" alt></p>\n<p>可能是由于录制的原因，看上去过渡效果不是太流畅，实际上是没有这些问题的。贴一下代码，顺便记录一下思路</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">\t&lt;head&gt;</span><br><span class=\"line\">\t\t&lt;meta charset=&quot;utf-8&quot; /&gt;</span><br><span class=\"line\">\t\t&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class=\"line\">\t\t&lt;title&gt;定时器运动&lt;/title&gt;</span><br><span class=\"line\">\t\t&lt;style type=&quot;text/css&quot;&gt;</span><br><span class=\"line\">\t\t\t*&#123;</span><br><span class=\"line\">\t\t\t\tmargin: 0;</span><br><span class=\"line\">\t\t\t\tpadding: 0;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t.box1&#123;</span><br><span class=\"line\">\t\t\t\twidth: 200px;</span><br><span class=\"line\">\t\t\t\theight: 200px;</span><br><span class=\"line\">\t\t\t\tbackground-color: yellow;</span><br><span class=\"line\">\t\t\t\tposition: relative;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t.line&#123;</span><br><span class=\"line\">\t\t\t\theight: 800px;</span><br><span class=\"line\">\t\t\t\tborder-right: black 1px solid ;</span><br><span class=\"line\">\t\t\t\tposition: absolute;</span><br><span class=\"line\">\t\t\t\tleft: 800px;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&lt;/style&gt;</span><br><span class=\"line\">\t&lt;/head&gt;</span><br><span class=\"line\">\t&lt;body&gt;</span><br><span class=\"line\">\t\t&lt;div class=&quot;box1&quot;&gt;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">\t\t&lt;div class=&quot;line&quot;&gt;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t&lt;button type=&quot;button&quot; class=&quot;btn&quot;&gt;向右运动&lt;/button&gt;</span><br><span class=\"line\">\t\t&lt;button type=&quot;button&quot; class=&quot;btn5&quot;&gt;向左运动&lt;/button&gt;</span><br><span class=\"line\">\t\t&lt;button type=&quot;button&quot; class=&quot;btn2&quot;&gt;点击停止运动&lt;/button&gt;</span><br><span class=\"line\">\t\t&lt;button type=&quot;button&quot; class=&quot;btn3&quot;&gt;点我到800px处自动停下&lt;/button&gt;</span><br><span class=\"line\">\t\t&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class=\"line\">\t\t\tvar box = document.querySelector(&quot;.box1&quot;);</span><br><span class=\"line\">\t\t\tvar box2 = document.querySelector(&quot;.box2&quot;);</span><br><span class=\"line\">\t\t\tvar btn = document.querySelector(&quot;.btn&quot;);</span><br><span class=\"line\">\t\t\tvar btn2 = document.querySelector(&quot;.btn2&quot;);</span><br><span class=\"line\">\t\t\tvar btn3 = document.querySelector(&quot;.btn3&quot;);</span><br><span class=\"line\">\t\t\tvar btn5 = document.querySelector(&quot;.btn5&quot;);</span><br><span class=\"line\">\t\t\tvar timer ;</span><br><span class=\"line\">\t\t\tvar timer2 ;</span><br><span class=\"line\">\t\t\tbtn.onclick = function()&#123;</span><br><span class=\"line\">\t\t\t\tclearInterval(timer);</span><br><span class=\"line\">\t\t\t\ttimer = setInterval(function()&#123;</span><br><span class=\"line\">\t\t\t\t\tvar currentVal = getComputedStyle(box,null).left;</span><br><span class=\"line\">\t\t\t\t\tbox.style.left = parseInt(currentVal)+1+&quot;px&quot;;</span><br><span class=\"line\">\t\t\t\t&#125;,5)\t</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tbtn2.onclick = function()&#123;</span><br><span class=\"line\">\t\t\t\tclearInterval(timer)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tbtn5.onclick = function()&#123;</span><br><span class=\"line\">\t\t\t\tclearInterval(timer);</span><br><span class=\"line\">\t\t\t\ttimer = setInterval(function()&#123;</span><br><span class=\"line\">\t\t\t\t\tvar currentVal = getComputedStyle(box,null).left;</span><br><span class=\"line\">\t\t\t\t\tbox.style.left = parseInt(currentVal)-1+&quot;px&quot;;</span><br><span class=\"line\">\t\t\t\t&#125;,5)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tbtn3.onclick = function()&#123;</span><br><span class=\"line\">\t\t\t\tclearInterval(timer);</span><br><span class=\"line\">\t\t\t\t timer = setInterval(function()&#123;</span><br><span class=\"line\">\t\t\t\t\tvar currentVal = getComputedStyle(box,null).left;</span><br><span class=\"line\">\t\t\t\t\tif(parseInt(currentVal) &lt; 800)&#123;</span><br><span class=\"line\">\t\t\t\t\t\tbox.style.left = parseInt(currentVal)+1+&quot;px&quot;;</span><br><span class=\"line\">\t\t\t\t\t&#125;else if(parseInt(currentVal) &gt; 800)&#123;</span><br><span class=\"line\">\t\t\t\t\t\tbox.style.left = parseInt(currentVal)-1+&quot;px&quot;;</span><br><span class=\"line\">\t\t\t\t\t&#125;else if( parseInt(currentVal) == 800)&#123;</span><br><span class=\"line\">\t\t\t\t\t\tclearInterval(timer)</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t&#125;,5)\t</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t&lt;/script&gt;</span><br><span class=\"line\">\t&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>代码中没有什么特别需要注意的地方，基本上的逻辑就是 在运动前开启定时器，并通过<code>getComputedStyle()</code>属性去获取当前盒子移动的距离，left,这个属性获取到的是一个带px的字符串，所以咱们通过parseInt去转换为数字，通过该数字加或者减去每毫秒运动的直线距离，绑定按钮点击事件，从而达到使得盒子运动的过渡动画效果<br>Tip:在点击按钮事件是，我们第一件事是要去关闭上一次的定时器，如果不关闭，会出现 ：一直点击向左的按钮，那么这个盒子运动的速度会越来越快，关闭之后，再怎么点击，都不会出现盒子加速的后果。</p>\n","categories":[],"tags":[{"name":"-JavaScript","slug":"JavaScript","count":2,"path":"api/tags/JavaScript.json"}]}